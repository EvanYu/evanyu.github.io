<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>HUGO的安装与配置 - FOOLENG</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Evan Yu" /><meta name="description" content="简介 Hugo对我而言最大的优势就是简单和快速（Golang的单文件） 学习主要参考了Hugo中文文档和Hugo不完美教程。 快速开始 安装 到 Hugo Re" /><meta name="keywords" content="Hugo, golang, web" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="http://notes.fooleng.com/private/2022-04-12-hugo%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/custom.css">


<meta property="og:title" content="HUGO的安装与配置" />
<meta property="og:description" content="简介 Hugo对我而言最大的优势就是简单和快速（Golang的单文件） 学习主要参考了Hugo中文文档和Hugo不完美教程。 快速开始 安装 到 Hugo Re" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://notes.fooleng.com/private/2022-04-12-hugo%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" /><meta property="article:section" content="private" />
<meta property="article:published_time" content="2022-04-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-04-13T00:00:00+00:00" />

<meta itemprop="name" content="HUGO的安装与配置">
<meta itemprop="description" content="简介 Hugo对我而言最大的优势就是简单和快速（Golang的单文件） 学习主要参考了Hugo中文文档和Hugo不完美教程。 快速开始 安装 到 Hugo Re"><meta itemprop="datePublished" content="2022-04-12T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-04-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="7735">
<meta itemprop="keywords" content="Hugo,golang,web," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="HUGO的安装与配置"/>
<meta name="twitter:description" content="简介 Hugo对我而言最大的优势就是简单和快速（Golang的单文件） 学习主要参考了Hugo中文文档和Hugo不完美教程。 快速开始 安装 到 Hugo Re"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">FOOLENG</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/projects/">
        <li class="mobile-menu-item">项目</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于我</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">FOOLENG</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/projects/">项目</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于我</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <div class="post-content">
    <h2 id="简介">简介</h2>
<ul>
<li>Hugo对我而言最大的优势就是简单和快速（Golang的单文件）</li>
<li>学习主要参考了<a href="https://www.gohugo.org/">Hugo中文文档</a>和<a href="https://www.jianshu.com/p/deaa0e58315a">Hugo不完美教程</a>。</li>
</ul>
<h2 id="快速开始">快速开始</h2>
<h3 id="安装">安装</h3>
<ul>
<li>到 <a href="https://github.com/spf13/hugo/releases">Hugo Releases</a>下载对应的操作系统版本</li>
<li>Hugo常用命令</li>
</ul>
<pre><code class="language-shell"># 帮助
hugo -h

# 查看版本
hugo version

# 快速新建站点
hugo new site /path/to/site

# 新建一篇文章
hugo new about.md
hugo new posts/2022-04-12-new_post.md

# 生成站点到public文件夹中（不会生成草稿文章）
hugo -t Hugo-Octopress -b &quot;http://fooleng.com/&quot;

# 启动本地服务器进行调试，'-t Hugo-Octopress'表示使用Hugo-Octopress主题
# -D 代表草稿文章也同样生成
# 启动服务后打开http://localhost:1313/
hugo server -t Hugo-Octopress -D
</code></pre>
<h3 id="创建站点">创建站点</h3>
<p>使用Hugo快速生成站点，比如希望生成到<code>~/mysite</code>目录</p>
<pre><code class="language-shell">hugo new site ~/mysite
</code></pre>
<p>这样就在<code>~/mysite</code>目录里生成了初始站点，目录结构如下，也可以参考<a href="https://www.jianshu.com/p/c5297a8bb1e7">这里</a></p>
<ul>
<li><code>archetypes/</code>：内容模板目录，使用命令<code>hugo new posts/firstpost.md</code>时Hugo就会在此目录下寻找<code>post.md</code>文件作为<code>firstpost.md</code>的初始化。</li>
<li><code>content/</code>：所有内容文件的存放目录，内容目录结构与URL对应关系参考如下：</li>
</ul>
<pre><code class="language-txt">.
└── content
    └── about
    |   └── index.md       // &lt;- https://example.com/about/
    ├── posts
    |   ├── _index.md      // &lt;- https://example.com/posts/
    |   ├── index.md       // &lt;- https://example.com/posts/
    |   ├── firstpost.md   // &lt;- https://example.com/posts/firstpost/
    |   ├── happy
    |   |   └── ness.md    // &lt;- https://example.com/posts/happy/ness/
    |   └── secondpost.md  // &lt;- https://example.com/posts/secondpost/
    └── quote
        ├── first.md       // &lt;- https://example.com/quote/first/
        └── second.md      // &lt;- https://example.com/quote/second/
</code></pre>
<ul>
<li><code>data/</code>：数据模板目录，可以想象为Hugo的数据库</li>
<li><code>layouts/</code>：布局模板文件目录，存放<code>.html</code>布局模板文件</li>
<li><code>static/</code>：静态资源存放目录</li>
<li><code>themes/</code>：主题目录</li>
<li><code>config.toml</code>：站点设置文件，这个文件还可以使用<code>config.yaml</code>或<code>config.json</code></li>
<li><code>pulic/</code>：生成的静态网站目录，如果使用<code>GitPage</code>，直接将此目录下的文件同步到<code>github</code>即可</li>
</ul>
<h3 id="添加文章">添加文章</h3>
<ul>
<li>创建一个<code>about</code>页面（默认将会以<code>archetypes/default.md</code>为模板创建）</li>
</ul>
<pre><code class="language-shell">hugo new about.md
</code></pre>
<p><code>about.md</code>自动生成到了<code>content/about.md</code></p>
<ul>
<li>创建一篇<code>post</code>（默认将会以<code>archetypes/default.md</code>为模板创建）</li>
</ul>
<pre><code class="language-shell">hugo new posts/first_post.md
</code></pre>
<h2 id="hugo-octopresshttpsgithubcomparsiyahugo-octopress主题"><a href="https://github.com/parsiya/Hugo-Octopress">Hugo-Octopress</a>主题</h2>
<h3 id="安装-1">安装</h3>
<h4 id="主题的获取途径">主题的获取途径</h4>
<ul>
<li>到<a href="https://www.gohugo.org/theme/">皮肤列表</a>选择一个合适的主题，也可以直接在 <a href="https://github.com">github</a> 上直接搜索<code>hugo theme</code>去获取。我这里选择的是<a href="https://github.com/parsiya/Hugo-Octopress"> Hugo-Octopress</a>主题。</li>
<li>网站主题的安装往往需要配合修改<code>config.toml</code>文件，一般情况主题的<code>repos</code>都会提供一个示例</li>
</ul>
<h4 id="下载">下载</h4>
<pre><code class="language-shell"># 如果是使用git管理的站点就采用submodule方式
git submodule add https://github.com/parsiya/Hugo-Octopress themes/Hugo-Octopress

# 否则就直接克隆主题仓库
git clone https://github.com/parsiya/Hugo-Octopress themes/Hugo-Octopress
</code></pre>
<h4 id="基本设置">基本设置</h4>
<p>编辑<code>config.toml</code>文件</p>
<pre><code class="language-toml">baseurl = &quot;http://fooleng.com&quot;
disablePathToLower = false
languageCode = &quot;zh-cn&quot;
title = &quot;FOOLENG&quot;
theme = &quot;hugo-octopress&quot;

# Disqus shortcode
# Disable comments for any individual post by adding &quot;comments: false&quot; in its frontmatter
# disqusShortname = &quot;Your disqus shortname&quot;

# Number of blog posts in each pagination page
paginate = 17

[permalinks]
  # Configures post URLs
  posts = &quot;/posts/:year-:month-:day-:title/&quot;
  page = &quot;/:slug/&quot;

[params]

  # If false, all contents of posts will appear on the front page and in pagination
  truncate = true

  # Author's name (appears in meta tags and under posts)
  author = &quot;evan&quot;

  # This text appears in site header under website title
  subtitle = &quot;Make every second counts!&quot;

  # Search engine URL
  # searchEngineURL = &quot;https://www.google.com/search&quot;
  searchEngineURL = &quot;https://www.bing.com&quot;

  # Text of the &quot;Continue Reading&quot; label. Supports markdown and inline HTML.
  # For example, &amp;rarr; == right arrow.
  continueReadingText = &quot;更多? &amp;rarr;&quot;

  # Google analytics code - remove if you do not have/want Google Analytics - needs JavaScript
  # googleAnalytics = &quot;UA-XXXXX-X&quot;

  # Optional piwik tracking
  #[params.analytics.piwik]
  #  URL = &quot;https://stats.example.com&quot;
  #  ID = &quot;42&quot;

  # Switch to true to enable RSS icon link
  rss = true

  # Set to true to use a text label for RSS instead of an icon
  # This is overwritten by the &quot;rss&quot; setting
  textrss = false

  # Website's default description
  description = &quot;&quot;

  # Populate with your search keywords - these will appear in meta tags
  # defaultKeywords = [&quot;keyword1&quot; , &quot;keyword2&quot; , &quot;keyword3&quot; , &quot;keyword4&quot;]

  # Set to true to hide ReadingTime on posts
  disableReadingTime = false

  # Set to true to disable downloading of remote Google fonts
  disableGoogleFonts = false

  # Remove or set to false to use local fonts
  remoteFonts = false

  # Remove or set to false to use FontAwesome CDN, otherwise, the theme uses ForkAwesome local fonts.
  fontAwesome = false
  
  # Set custom css files(/path/to/site/static/css/custom.css)
  customCSS = [&quot;css/custom.css&quot;, &quot;css/custom2.css&quot;]
  
</code></pre>
<h4 id="启动测试">启动测试</h4>
<pre><code class="language-shell">hugo server --theme=Hugo-Octopress --buildDrafts
</code></pre>
<h3 id="修改">修改</h3>
<h4 id="favicon修改">favicon修改</h4>
<p>将自己的favicon文件放到<code>sitepath/static/favicon.png</code>即可。</p>
<h4 id="导航菜单栏">导航菜单栏</h4>
<p>编辑<code>config.toml</code>，添加如下内容</p>
<pre><code class="language-toml">[params]
  # If set to true, navigation menu links will open in a new window with the exception of links to root (&quot;/&quot;)
  # If this item does not exist or is set to false, then navigation menu links will open in the same window
  navigationNewWindow = false

[[menu.main]]
  Name = &quot;首页&quot;
  URL = &quot;/&quot;
  weight = -10

[[menu.main]]
  Name = &quot;文章分类&quot;
  URL = &quot;/categories&quot;
  weight = -9

[[menu.main]]
  Name = &quot;项目&quot;
  URL = &quot;/projects&quot;
  weight = -8
  
[[menu.main]]
  Name = &quot;关于我&quot;
  URL = &quot;/about&quot;
  weight = -7
</code></pre>
<h4 id="生成html的定制">生成HTML的定制</h4>
<p>可以复制<code>themes/Hugo-Octopress/layouts/partials/</code>文件夹下的文件到<code>your-site/layouts/partials</code>目录下，然后修改成自己需要的样子，比如：</p>
<ul>
<li><code>extend_header.html</code>：所有页面上<code>head</code>标签后面都会增加这个页面的内容</li>
<li><code>extend_footer.html</code>：所有页面上<code>footer</code>标签后面都会增加这个页面的内容</li>
</ul>
<p>比如我们添加MathJax的支持就在<code>extend_footer.html</code>文件中添加：</p>
<pre><code class="language-html">&lt;!--MathJax Settings Start--&gt;
&lt;script type=&quot;text/javascript&quot;
        async
        src=&quot;https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: &quot;AMS&quot; },
         extensions: [&quot;AMSmath.js&quot;, &quot;AMSsymbols.js&quot;] }
  }
});

MathJax.Hub.Queue(function() {
    // Fix &lt;code&gt; tags after MathJax finishes running. This is a
    // hack to overcome a shortcoming of Markdown. Discussion at
    // https://github.com/mojombo/jekyll/issues/199
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i &lt; all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
&lt;/script&gt;

&lt;style&gt;
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
&lt;/style&gt;
&lt;!--MathJax Settings Ends--&gt;
</code></pre>
<h4 id="侧边栏">侧边栏</h4>
<ul>
<li>
<p>侧边栏从上到下总共分为四个部分</p>
<ul>
<li>标题和文本（可选项）</li>
<li>社交网络图标（可选项）</li>
<li>菜单栏：外部链接等（可选项）</li>
<li>最近发表的文章（默认5篇）</li>
</ul>
</li>
<li>
<p>标题和文本定制</p>
</li>
</ul>
<pre><code class="language-toml">[params]
  sidebarHeader = &quot;关于我&quot;

  sidebarText = &quot;&quot;&quot;职业：结构工程师

  爱好：计算机编程、读书

  联系方式：evan75s@gmail.com
  &quot;&quot;&quot;
</code></pre>
<ul>
<li>社交网络图标定制</li>
</ul>
<pre><code class="language-toml">[params]
  github = &quot;https://github.com/EvanYu/&quot;
  bitbucket = &quot;&quot;
  gitlab = &quot;&quot;
  twitter = &quot;&quot;
  keybase = &quot;&quot;
  linkedin = &quot;&quot;
  stackoverflow = &quot;&quot;
  youtube = &quot;&quot;
  facebook = &quot;&quot;
  instagram = &quot;&quot;
  bitcoin = &quot;&quot;
</code></pre>
<p>如果需要添加自定的社交网络图标（比如邮件），可以复制<code>your-website/themes/Hugo-Octopress/layouts/partials/sidebar.html</code>到<code>your-website/layouts/partials/sidebar.html</code>，然后修改<code>sidebar.html</code>这个文件的<code>&lt;li class=&quot;sidebar-nav-item&quot;&gt;</code>子条目来实现，下面是一个添加邮件的示例（添加如下代码后再在<code>config.toml</code>文件中添加<code>mail=&quot;mailto:evan75s@gmail.com&quot;</code>）：</p>
<pre><code class="language-html">{{ with .Site.Params.mail }}&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;{{ . }}&quot; title=&quot;{{ . }}&quot;&gt;&lt;i class=&quot;fa fa-envelope fa-3x&quot;&gt;&lt;/i&gt;&lt;/a&gt;{{ end }}
</code></pre>
<ul>
<li>菜单栏定制：显示文章分类目录</li>
</ul>
<pre><code class="language-toml">[params]
  # Enable sidebar menu and open link in same window
  # Set sidebar menu header
  sidebarMenuEnabled = true
  sidebarNewWindow = false
  sidebarMenuHeader = &quot;文章分类&quot;
  
[[menu.sidebar]]
  Name = &quot;数学与力学&quot;
  URL = &quot;/categories/数学与力学/&quot;
  weight = -30

[[menu.sidebar]]
  Name = &quot;结构概念设计&quot;
  URL = &quot;/categories/结构概念设计/&quot;
  weight = -29

[[menu.sidebar]]
  Name = &quot;结构可靠性设计和作用&quot;
  URL = &quot;/categories/结构可靠性设计和作用/&quot;
  weight = -28

[[menu.sidebar]]
  Name = &quot;建筑结构抗震设计&quot;
  URL = &quot;/categories/建筑结构抗震设计/&quot;
  weight = -27

[[menu.sidebar]]
  Name = &quot;钢筋混凝土结构&quot;
  URL = &quot;/categories/钢筋混凝土结构/&quot;
  weight = -26

[[menu.sidebar]]
  Name = &quot;钢结构&quot;
  URL = &quot;/categories/钢结构/&quot;
  weight = -25

[[menu.sidebar]]
  Name = &quot;砌体结构与木结构&quot;
  URL = &quot;/categories/砌体结构与木结构/&quot;
  weight = -24

[[menu.sidebar]]
  Name = &quot;地基与基础&quot;
  URL = &quot;/categories/高层建筑结构与高耸结构/&quot;
  weight = -23

[[menu.sidebar]]
  Name = &quot;桥梁结构&quot;
  URL = &quot;/categories/桥梁结构/&quot;
  weight = -22

[[menu.sidebar]]
  Name = &quot;工程实践&quot;
  URL = &quot;/categories/工程实践/&quot;
  weight = -21

[[menu.sidebar]]
  Name = &quot;Software&quot;
  URL = &quot;/categories/Software/&quot;
  weight = -20

[[menu.sidebar]]
  Name = &quot;AutoCAD&quot;
  URL = &quot;/categories/AutoCAD/&quot;
  weight = -19

[[menu.sidebar]]
  Name = &quot;Linux&quot;
  URL = &quot;/categories/Linux/&quot;
  weight = -18

[[menu.sidebar]]
  Name = &quot;Web&quot;
  URL = &quot;/categories/Web/&quot;
  weight = -17

[[menu.sidebar]]
  Name = &quot;C&amp;C++&quot;
  URL = &quot;/categories/C&amp;C++/&quot;
  weight = -16

[[menu.sidebar]]
  Name = &quot;Golang&quot;
  URL = &quot;/categories/Golang/&quot;
  weight = -15

[[menu.sidebar]]
  Name = &quot;Python&quot;
  URL = &quot;/categories/Python/&quot;
  weight = -14

[[menu.sidebar]]
  Name = &quot;CSharp&quot;
  URL = &quot;/categories/CSharp/&quot;
  weight = -13

[[menu.sidebar]]
  Name = &quot;杂谈&quot;
  URL = &quot;/categories/杂谈/&quot;
  weight = -12
</code></pre>
<ul>
<li>最近发表的文章：不显示</li>
</ul>
<pre><code class="language-toml">[params]
  # Don't show recent posts in sidebar
  sidebarRecentLimit = 0
</code></pre>
<h4 id="页面">页面</h4>
<ul>
<li>版权页面</li>
</ul>
<p>可以新建一个<code>content/license.md</code>文件，在头部采用如下声明：</p>
<pre><code class="language-markdown">---
title: &quot;License&quot;
type: license
---

License text
</code></pre>
<ul>
<li>404页面</li>
</ul>
<p>主题有一个默认的404页面，但是可以通过两个参数来设置404的标题和显示的文字：<code>notFoundHeader</code>（404页面的标题）、<code>notFoundText</code>（404页面显示的文字内容），这两个参数均支持<code>markdown</code>语法。</p>
<ul>
<li>分类和标签页面</li>
</ul>
<p>通过设置参数<code>generateTaxonomyList = true</code>可以自动生成标签和分类页面到<code>baseURL/tags/</code> 与<code>baseURL/categories</code>。可以通过设置<code>sortTaxonomyAlphabetical = true</code>来修改排序方式。</p>
<ul>
<li>其他的独立页面</li>
</ul>
<p>在<code>content</code>目录下的<code>markdown</code>文件一般我们都希望成为页面而不是<code>post</code>，可以在文件头设置<code>type: page</code>就会生成独立的页面。</p>
<h4 id="目录">目录</h4>
<ul>
<li>设置目录生成的级别</li>
</ul>
<p>如下的设置，生成页面的时候1-8级都会生成到目录中。而需要在文章中显示目录的话可以在头部增加<code>toc: true</code>或在<code>config.toml</code>中添加<code>tableOfContents = true</code>参数来默认显示目录。</p>
<pre><code class="language-toml"># Set table of contents
[markup]
  [markup.tableOfContents]
    endLevel = 8
    startLevel = 1
</code></pre>
<h4 id="首页显示">首页显示</h4>
<ul>
<li>文章列表的显示方式</li>
</ul>
<pre><code class="language-toml">[params]
  # Set to true to enable compact index. Set to false or remove to go back to classic view.
  compactIndex = true
</code></pre>
<ul>
<li>主页显示内容</li>
</ul>
<p>本主题支持在主页显示多个子项的内容，比如我有<code>content/posts/</code>和<code>content/blogs</code>两个section，但是想要都显示在主页上，那么可以做如下设置（默认主页会显示文章最多的section）：</p>
<pre><code class="language-toml">[params]
  mainSections = [&quot;posts&quot;, &quot;blogs&quot;]
</code></pre>
<h4 id="文章标题添加序号">文章标题添加序号</h4>
<ul>
<li>在<code>config.toml</code>中添加自定义CSS文件位置设置</li>
</ul>
<pre><code class="language-toml">[params]
  # Set custom css files(/path/to/site/static/css/custom.css)
  customCSS = [&quot;css/custom.css&quot;, &quot;css/custom2.css&quot;]
</code></pre>
<ul>
<li>在<code>/static/css/custom.css</code>中添加</li>
</ul>
<pre><code class="language-css">/* Add numbers to title */
.entry-content h2:before{
    content:counter(h2counter) ' ';
}
.entry-content h2{
    counter-increment: h2counter;
    counter-reset: h3counter;
}

.entry-content h3:before{
    content:counter(h2counter) '.' counter(h3counter)' ';
}
.entry-content h3{
    counter-increment: h3counter;
    counter-reset: h4counter;
}

.entry-content h4:before{
    content:counter(h2counter) '.' counter(h3counter) '.' counter(h4counter)' ';
}
.entry-content h4{
    counter-increment: h4counter;
    counter-reset: h5counter;
}
</code></pre>
<h2 id="hugo-theme-evenhttpsgithubcomolowolohugo-theme-even主题"><a href="https://github.com/olOwOlo/hugo-theme-even">hugo-theme-even</a>主题</h2>
<p>现在我已经切换成even主题了，这个主题相对来说更加的现代化、对多国语言支持更好。</p>
<h3 id="安装-2">安装</h3>
<pre><code class="language-bash"># 如果是使用git管理的站点就采用submodule方式
git submodule add https://github.com/olOwOlo/hugo-theme-even themes/even

# 否则就直接克隆主题仓库
git clone https://github.com/olOwOlo/hugo-theme-even themes/even
</code></pre>
<h3 id="设置">设置</h3>
<p>看<a href="https://github.com/olOwOlo/hugo-theme-even/blob/master/README-zh.md">官方文档</a>可以知道使用这个主题有三个重点：</p>
<ul>
<li>设置只需要复制主题目录下<code>exampleSite/config.toml</code>文件到站点根目录，然后修改这个文件即可</li>
<li>这个主题用到了 <a href="https://gohugo.io/hugo-pipes/introduction/">Hugo Pipes</a> 功能。如需修改 <code>assets</code> 目录下的文件，请安装 extended 版。</li>
<li>对于这个主题，应该使用<strong>post</strong>而不是<strong>posts</strong>，即<code>hugo new post/some-content.md</code>。否则会导致主页没有文章显示出来。</li>
<li>如下是我的设置：</li>
</ul>
<pre><code class="language-toml">baseURL = &quot;http://blog.fooleng.com/&quot;
languageCode = &quot;zh-cn&quot;
defaultContentLanguage = &quot;zh-cn&quot;                             # en / zh-cn / ... (This field determines which i18n file to use)
title = &quot;FOOLENG&quot;
preserveTaxonomyNames = true
enableRobotsTXT = true
enableEmoji = true
theme = &quot;even&quot;
enableGitInfo = false # use git commit log to generate lastmod record # 可根据 Git 中的提交生成最近更新记录。

# Syntax highlighting by Chroma. NOTE: Don't enable `highlightInClient` and `chroma` at the same time!
pygmentsOptions = &quot;linenos=table&quot;
pygmentsCodefences = false
pygmentsUseClasses = false
pygmentsCodefencesGuessSyntax = false

hasCJKLanguage = true     # has chinese/japanese/korean ? # 自动检测是否包含 中文\日文\韩文
paginate = 10                                             # 首页每页显示的文章数
disqusShortname = &quot;&quot;      # disqus_shortname
googleAnalytics = &quot;&quot;      # UA-XXXXXXXX-X
copyright = &quot;&quot;            # default: author.name ↓        # 默认为下面配置的author.name ↓

[author]                  # essential                     # 必需
  name = &quot;Evan Yu&quot;

[sitemap]                 # essential                     # 必需
  changefreq = &quot;weekly&quot;
  priority = 0.5
  filename = &quot;sitemap.xml&quot;

[[menu.main]]             # config your menu              # 配置目录
  name = &quot;主页&quot;
  weight = 10
  identifier = &quot;home&quot;
  url = &quot;/&quot;
[[menu.main]]
  name = &quot;归档&quot;
  weight = 20
  identifier = &quot;archives&quot;
  url = &quot;/post/&quot;
[[menu.main]]
  name = &quot;分类&quot;
  weight = 30
  identifier = &quot;categories&quot;
  url = &quot;/categories/&quot;
[[menu.main]]
  name = &quot;项目&quot;
  weight = 40
  identifier = &quot;projects&quot;
  url = &quot;/projects/&quot;
[[menu.main]]
  name = &quot;关于我&quot;
  weight = 50
  identifier = &quot;about&quot;
  url = &quot;/about/&quot;

[params]
  version = &quot;4.x&quot;           # Used to give a friendly message when you have an incompatible update
  debug = false             # If true, load `eruda.min.js`. See https://github.com/liriliri/eruda

  since = &quot;2018&quot;            # Site creation time          # 站点建立时间
  # use public git repo url to link lastmod git commit, enableGitInfo should be true.
  # 指定 git 仓库地址，可以生成指向最近更新的 git commit 的链接，需要将 enableGitInfo 设置成 true.
  gitRepo = &quot;&quot;

  # site info (optional)                                  # 站点信息（可选，不需要的可以直接注释掉）
  logoTitle = &quot;&quot;        # default: the title value    # 默认值: 上面设置的title值
  keywords = [&quot;FoolEng&quot;, &quot;结构设计&quot;,&quot;计算机&quot;]
  description = &quot;天行健，君子以自强不息&quot;

  # paginate of archives, tags and categories             # 归档、标签、分类每页显示的文章数目，建议修改为一个较大的值
  archivePaginate = 500

  # show 'xx Posts In Total' in archive page ?            # 是否在归档页显示文章的总数
  showArchiveCount = true

  # The date format to use; for a list of valid formats, see https://gohugo.io/functions/format/
  dateFormatToUse = &quot;2006-01-02&quot;

  # show word count and read time ?                       # 是否显示字数统计与阅读时间
  moreMeta = true

  # Syntax highlighting by highlight.js
  highlightInClient = true

  # 一些全局开关，你也可以在每一篇内容的 front matter 中针对单篇内容关闭或开启某些功能，在 archetypes/default.md 查看更多信息。
  # Some global options, you can also close or open something in front matter for a single post, see more information from `archetypes/default.md`.
  toc = true                                                                            # 是否开启目录
  autoCollapseToc = false   # Auto expand and collapse toc                              # 目录自动展开/折叠
  fancybox = true           # see https://github.com/fancyapps/fancybox                 # 是否启用fancybox（图片可点击）

  # mathjax
  mathjax = true           # see https://www.mathjax.org/                              # 是否使用mathjax（数学公式）
  mathjaxEnableSingleDollar = true                                                     # 是否使用 $...$ 即可進行inline latex渲染
  mathjaxEnableAutoNumber = false                                                       # 是否使用公式自动编号
  mathjaxUseLocalFiles = false  # You should install mathjax in `your-site/static/lib/mathjax`

  postMetaInFooter = true   # contain author, lastMod, markdown link, license           # 包含作者，上次修改时间，markdown链接，许可信息
  linkToMarkDown = false    # Only effective when hugo will output .md files.           # 链接到markdown原始文件（仅当允许hugo生成markdown文件时有效）
  contentCopyright = ''     # e.g. '&lt;a rel=&quot;license noopener&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot;&gt;CC BY-NC-ND 4.0&lt;/a&gt;'

  changyanAppid = &quot;&quot;        # Changyan app id             # 畅言
  changyanAppkey = &quot;&quot;       # Changyan app key

  livereUID = &quot;&quot;            # LiveRe UID                  # 来必力

  baiduPush = false        # baidu push                  # 百度
  baiduAnalytics = &quot;&quot;      # Baidu Analytics
  baiduVerification = &quot;&quot;   # Baidu Verification
  googleVerification = &quot;&quot;  # Google Verification         # 谷歌

  # Link custom CSS and JS assets
  #   (relative to /static/css and /static/js respectively)
  customCSS = [&quot;custom.css&quot;]
  customJS = []

  uglyURLs = false          # please keep same with uglyurls setting

  # Show language selector for multilingual site.
  showLanguageSelector = false

  [params.publicCDN]        # load these files from public cdn                          # 启用公共CDN，需自行定义
    enable = true
    jquery = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js&quot; integrity=&quot;sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    slideout = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js&quot; integrity=&quot;sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    fancyboxJS = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js&quot; integrity=&quot;sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    fancyboxCSS = '&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css&quot; integrity=&quot;sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=&quot; crossorigin=&quot;anonymous&quot;&gt;'
    timeagoJS = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js&quot; integrity=&quot;sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    timeagoLocalesJS = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js&quot; integrity=&quot;sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    flowchartDiagramsJS = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/raphael@2.2.7/raphael.min.js&quot; integrity=&quot;sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/flowchart.js@1.8.0/release/flowchart.min.js&quot; integrity=&quot;sha256-zNGWjubXoY6rb5MnmpBNefO0RgoVYfle9p0tvOQM+6k=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'
    sequenceDiagramsCSS = '&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.css&quot; integrity=&quot;sha384-6QbLKJMz5dS3adWSeINZe74uSydBGFbnzaAYmp+tKyq60S7H2p6V7g1TysM5lAaF&quot; crossorigin=&quot;anonymous&quot;&gt;'
    sequenceDiagramsJS = '&lt;script src=&quot;https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js&quot; integrity=&quot;sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/snapsvg@0.5.1/dist/snap.svg-min.js&quot; integrity=&quot;sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore-min.js&quot; integrity=&quot;sha256-obZACiHd7gkOk9iIL/pimWMTJ4W/pBsKu+oZnSeBIek=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.js&quot; integrity=&quot;sha384-8748Vn52gHJYJI0XEuPB2QlPVNUkJlJn9tHqKec6J3q2r9l8fvRxrgn/E5ZHV0sP&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;'

  # Display a message at the beginning of an article to warn the readers that it's content may be outdated.
  # 在文章开头显示提示信息，提醒读者文章内容可能过时。
  [params.outdatedInfoWarning]
    enable = false
    hint = 30               # Display hint if the last modified time is more than these days ago.    # 如果文章最后更新于这天数之前，显示提醒
    warn = 180              # Display warning if the last modified time is more than these days ago.    # 如果文章最后更新于这天数之前，显示警告

  [params.gitment]          # Gitment is a comment system based on GitHub issues. see https://github.com/imsun/gitment
    owner = &quot;&quot;              # Your GitHub ID
    repo = &quot;&quot;               # The repo to store comments
    clientId = &quot;&quot;           # Your client ID
    clientSecret = &quot;&quot;       # Your client secret

  [params.utterances]       # https://utteranc.es/
    owner = &quot;&quot;              # Your GitHub ID
    repo = &quot;&quot;               # The repo to store comments

  [params.gitalk]           # Gitalk is a comment system based on GitHub issues. see https://github.com/gitalk/gitalk
    owner = &quot;&quot;              # Your GitHub ID
    repo = &quot;&quot;               # The repo to store comments
    clientId = &quot;&quot;           # Your client ID
    clientSecret = &quot;&quot;       # Your client secret

  # Valine.
  # You can get your appid and appkey from https://leancloud.cn
  # more info please open https://valine.js.org
  [params.valine]
    enable = false
    appId = '你的appId'
    appKey = '你的appKey'
    notify = false  # mail notifier , https://github.com/xCss/Valine/wiki
    verify = false # Verification code
    avatar = 'mm'
    placeholder = '说点什么吧...'
    visitor = false

  [params.flowchartDiagrams]# see https://blog.olowolo.com/example-site/post/js-flowchart-diagrams/
    enable = false
    options = &quot;&quot;

  [params.sequenceDiagrams] # see https://blog.olowolo.com/example-site/post/js-sequence-diagrams/
    enable = false
    options = &quot;&quot;            # default: &quot;{theme: 'simple'}&quot;

  [params.busuanzi]         # count web traffic by busuanzi                             # 是否使用不蒜子统计站点访问量
    enable = false
    siteUV = true
    sitePV = true
    pagePV = true

  [params.reward]                                         # 文章打赏
    enable = false
    wechat = &quot;/path/to/your/wechat-qr-code.png&quot;           # 微信二维码
    alipay = &quot;/path/to/your/alipay-qr-code.png&quot;           # 支付宝二维码

  [params.social]                                         # 社交链接
    a-email = &quot;mailto:evan75s@gmail.com&quot;
    b-stack-overflow = &quot;&quot;
    c-twitter = &quot;&quot;
    d-facebook = &quot;&quot;
    e-linkedin = &quot;&quot;
    f-google = &quot;&quot;
    g-github = &quot;&quot;
    h-weibo = &quot;&quot;
    i-zhihu = &quot;&quot;
    j-douban = &quot;&quot;
    k-pocket = &quot;&quot;
    l-tumblr = &quot;&quot;
    m-instagram = &quot;&quot;
    n-gitlab = &quot;&quot;
    o-bilibili = &quot;&quot;

# See https://gohugo.io/about/hugo-and-gdpr/
[privacy]
  [privacy.googleAnalytics]
    anonymizeIP = true      # 12.214.31.144 -&gt; 12.214.31.0
  [privacy.youtube]
    privacyEnhanced = true

# see https://gohugo.io/getting-started/configuration-markup
[markup]
  [markup.tableOfContents]
    startLevel = 1
  [markup.goldmark.renderer]
    unsafe = true

# 将下面这段配置取消注释可以使 hugo 生成 .md 文件
# Uncomment these options to make hugo output .md files.
#[mediaTypes]
#  [mediaTypes.&quot;text/plain&quot;]
#    suffixes = [&quot;md&quot;]
#
#[outputFormats.MarkDown]
#  mediaType = &quot;text/plain&quot;
#  isPlainText = true
#  isHTML = false
#
#[outputs]
#  home = [&quot;HTML&quot;, &quot;RSS&quot;]
#  page = [&quot;HTML&quot;, &quot;MarkDown&quot;]
#  section = [&quot;HTML&quot;, &quot;RSS&quot;]
#  taxonomy = [&quot;HTML&quot;, &quot;RSS&quot;]
#  taxonomyTerm = [&quot;HTML&quot;]
</code></pre>
<h3 id="favicon修改-1">Favicon修改</h3>
<ul>
<li>上传图片到<a href="https://realfavicongenerator.net/">realfavicongenerator</a>并下载转换后的压缩包</li>
<li>将压缩包中的所有内容解压到<code>/static/</code>目录下</li>
<li>重命名<code>site.webmanifest</code>为<code>manifest.json</code></li>
</ul>
<h3 id="文章标题添加序号-1">文章标题添加序号</h3>
<p>在前面已经设置好自定的<code>css</code>文件路径后，在<code>custom.css</code>中添加如下内容（与Hugo-Octopress有所不同，因为<code>class</code>不同，而且不知道为什么需要添加h1的进去）</p>
<pre><code class="language-css">/* Add numbers to title */
.post-content h1:before{
    content:counter(h2counter) ' ';
}
.post-content h1{
    counter-increment: h2counter;
    counter-reset: h3counter;
}

.post-content h2:before{
    content:counter(h2counter) ' ';
}
.post-content h2{
    counter-increment: h2counter;
    counter-reset: h3counter;
}

.post-content h3:before{
    content:counter(h2counter) '.' counter(h3counter)' ';
}
.post-content h3{
    counter-increment: h3counter;
    counter-reset: h4counter;
}

.post-content h4:before{
    content:counter(h2counter) '.' counter(h3counter) '.' counter(h4counter)' ';
}
.post-content h4{
    counter-increment: h4counter;
    counter-reset: h5counter;
}
</code></pre>
<h2 id="archetypes模板文件定制">Archetypes模板文件定制</h2>
<h3 id="defaultmd">default.md</h3>
<pre><code class="language-markdown">---
title: &quot;{{ replace .Name &quot;-&quot; &quot; &quot; | title }}&quot;
date: {{ .Date }}
lastmod: {{ .Date }}
categories: []
tags: []
keywords: []
toc: true
draft: true
---
</code></pre>
<h3 id="postmd">post.md</h3>
<pre><code class="language-markdown">---
title: &quot;{{ replace .Name &quot;-&quot; &quot; &quot; | title }}&quot;
date: {{ .Date }}
lastmod: {{ .Date }}
categories: []
tags: []
keywords: []
toc: true
draft: true
---
</code></pre>
<h2 id="私人文章设置">私人文章设置</h2>
<h3 id="archtypesprivatemd模板"><code>archtypes/private.md</code>模板</h3>
<pre><code class="language-markdown">---
title: &quot;{{ replace .Name &quot;-&quot; &quot; &quot; | title }}&quot;
date: {{ .Date }}
lastmod: {{ .Date }}
categories: []
tags: []
keywords: []
draft: false
hiddenFromHomePage: true
---
</code></pre>
<h3 id="configtoml设置"><code>config.toml</code>设置</h3>
<p>主页不显示<code>content/private</code>下的文章（仅Hugo-Octopress主题需要这样设置，hugo-theme-even不需要设置这项）</p>
<pre><code class="language-toml">[params]
  mainSections = [&quot;posts&quot;, &quot;blogs&quot;]
</code></pre>
<h3 id="publicgitignore设置忽略private文件夹"><code>public/.gitignore</code>设置忽略<code>private</code>文件夹</h3>
<p>这部分的上传主要是指上传到github的公开仓库时不上传private文件夹，而私人的vps会采用直接在服务器生成的方式。</p>
<pre><code>private/
</code></pre>
<h3 id="nginx加密private文件夹">nginx加密<code>private</code>文件夹</h3>
<ul>
<li><code>vim /etc/nginx/passwd.db</code>（用户名：密码）</li>
</ul>
<pre><code class="language-shell">evan:ikcgV/hr0K50I
</code></pre>
<ul>
<li>密码的生成方法可以看<a href="https://bbs.huaweicloud.com/blogs/109730">在Linux下生成crypt加密密码</a>，我使用的是<code>openssl</code>命令的方式</li>
</ul>
<pre><code class="language-shell">openssl passwd -crypt 123
</code></pre>
<ul>
<li><code>nginx</code>加密目录设置</li>
</ul>
<pre><code class="language-nginx"># 增加^~表示对目录下的文件访问也需要验证，否则只验证目录
location ^~ /private {
    root /home/evan/repos/blog.fooleng.com/public;
    index index.html index.htm;
	auth_basic            &quot;Restricted Area&quot;;
	auth_basic_user_file  /etc/nginx/passwd.db;
    charset utf-8,gbk;
}
</code></pre>
<h2 id="部署">部署</h2>
<h3 id="部署架构说明">部署架构说明</h3>
<ul>
<li>采用git进行管理</li>
<li>主仓库包含<strong>主题</strong>和<strong>evanyu.github.io</strong>两个子仓库（Github上主要是作为备份而部署一份）</li>
<li>vps上部署的网站会显示全部的内容，而github上的网站仅包含公开的post</li>
<li>主仓库的源码放在VPS上的自建git服务器中</li>
<li>两个子仓库的代码均放置在Github上</li>
</ul>
<h3 id="仓库的建立与克隆">仓库的建立与克隆</h3>
<ul>
<li>在服务器上建立空仓库</li>
</ul>
<pre><code class="language-bash"># 在VPS上新建空仓库
git init --bare blog.fooleng.com.git
# 将空仓库的权限改为git:git
chown -R git:git blog.fooleng.com.git/
</code></pre>
<ul>
<li>克隆仓库到本地</li>
</ul>
<pre><code class="language-bash"># 克隆仓库到本地
git clone git.fooleng.com:/data/git/blog.fooleng.com.git
</code></pre>
<ul>
<li>添加主题的submodule</li>
</ul>
<pre><code class="language-bash">git submodule add https://github.com/olOwOlo/hugo-theme-even themes/even
</code></pre>
<ul>
<li>在gihub上新建一个空的仓库<code>evanyu.github.io</code>
<ul>
<li>在github上创建空的仓库</li>
<li>添加<code>.gitignore</code>文件并写入<code>private/</code></li>
<li>在仓库的<code>Settings-&gt;Pages-&gt;Custom domain</code>设置自定义域名（空仓库无法进行设置，仓库中必须至少要有一个文件）</li>
<li>在域名服务商处设置<code>notes.fooleng.com</code>指向<code>evanyu.github.io</code></li>
</ul>
</li>
<li>添加GitHub的submodule</li>
</ul>
<pre><code class="language-bash"># 添加public的submodule
git submodule add https://github.com/EvanYu/evanyu.github.io.git public
</code></pre>
<h3 id="生成站点">生成站点</h3>
<ul>
<li>生成用于上传到<code>evanyu.github.io</code>仓库的HTML并上传</li>
</ul>
<pre><code class="language-bash">hugo
cd public
git add .
git commit -m &quot;xxxxxx&quot;
git push
</code></pre>
<ul>
<li>上传主仓库到VPS</li>
</ul>
<pre><code class="language-bash">cd blog.fooleng.com/
git add .
git commit -m &quot;xxxxxx&quot;
git push
</code></pre>
<ul>
<li>用<code>ssh</code>登录到vps</li>
</ul>
<pre><code class="language-bash">cd ~/repos
# 如果已经clone出来仓库就在这步直接用git pull
git clone git.fooleng.com:/data/git/blog.fooleng.com.git
cd blog.fooleng.com
# 只更新主题子模块，因为githu上的子模块vps部署没用
git submodule init
git submodule update themes/even
# 生成用于VPS的html（注意此处的域名不一样）
hugo -b http://fooleng.com -d /data/blog.fooleng.com -D
</code></pre>
<h3 id="nginx设置">Nginx设置</h3>
<ul>
<li>设置VPS的nginx<code>/etc/nginx/conf.d/fooleng.com.conf</code></li>
</ul>
<pre><code class="language-nginx">server {
    listen       80;
    server_name  fooleng.com www.fooleng.com blog.fooleng.com gia.fooleng.com git.fooleng.com pk.fooleng.com v.fooleng.com;
    # 如下为自动转发https设置
    rewrite ^(.*) https://$server_name$1 permanent;

}


server {
    listen 443 ssl http2;
    server_name  fooleng.com www.fooleng.com blog.fooleng.com gia.fooleng.com git.fooleng.com pk.fooleng.com v.fooleng.com;
    index index.html index.htm default.html default.htm;

    location / {
        root   /data/blog.fooleng.com;
        index  index.html index.htm;
    }
    
    location ^~ /private {
        root   /data/blog.fooleng.com;
        index  index.html index.htm;
        auth_basic            &quot;Restricted Area&quot;;
        auth_basic_user_file  /etc/nginx/conf.d/passwd.db;
    }

    ssl_certificate /etc/letsencrypt/live/fooleng.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/fooleng.com/privkey.pem;
    
    # 如下部分的配置可以查看/etc/letsencrypt/options-ssl-nginx.conf
    ssl_session_timeout 1440m;
    ssl_session_tickets off;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers off;
    ssl_ciphers &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384&quot;;
    ssl_session_cache shared:le_nginx_SSL:10m;
    
    # 如下部分是反向代理的设置（此处为v2ray的设置）
    location /blog/tools/vv {
        if ($http_upgrade != &quot;websocket&quot;) {
            return 404;
        }
        proxy_redirect off;
        proxy_pass http://127.0.0.1:18283;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        proxy_set_header Host $host;
        # Show real IP in v2ray access.log
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
</code></pre>
<h3 id="写新文章与更新">写新文章与更新</h3>
<ul>
<li>更新本地仓库</li>
</ul>
<pre><code class="language-bash">git pull
</code></pre>
<ul>
<li>新建文章并编写完成</li>
</ul>
<pre><code>hugo new post/hello.md
</code></pre>
<ul>
<li>提交修改到仓库</li>
</ul>
<pre><code class="language-bash"># 生成Github仓库并提交
hugo
cd public/
git add .
git commit -m &quot;xxxxxx&quot;
git push
# 主仓库提交
cd ..
git add .
git commit -m &quot;Add post hello.md&quot;
git push
</code></pre>
<ul>
<li>登录到VPS（后续此部分改用脚本自动运行）</li>
</ul>

  </div>
</article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:evan75s@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/EvanYu" class="iconfont icon-github" title="github"></a>
  <a href="http://notes.fooleng.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2018 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Evan Yu</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
